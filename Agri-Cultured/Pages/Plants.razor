@page "/Plants"
@inject IDialogService DialogService
@using Controllers

<PageTitle>Plants</PageTitle>

<MudDataGrid Items="@data" T="PlantModel" Style="background-image: linear-gradient(90deg, rgb(165, 165, 175) 0%, rgb(227, 227, 227) 95%); color: #015249; text-shadow: 0px 1px 1px black;}">
    <ToolBarContent>
        <MudText Typo="Typo.h3">Plants</MudText>
    </ToolBarContent>
    <Columns >
        <PropertyColumn Property="x => x.Name" />
        <PropertyColumn Property="x => x.DatePlanted" Format="{0:d}" />
        <PropertyColumn Property="x => x.Location" />
        <TemplateColumn>
            <HeaderTemplate>
                Agricultural Task
            </HeaderTemplate>
            <CellTemplate>
                <MudButton Color="Color.Secondary" ButtonType="MudBlazor.ButtonType.Submit" StartIcon="@Icons.Material.Filled.Settings"></MudButton>
            </CellTemplate>
        </TemplateColumn>
        <TemplateColumn>
            <HeaderTemplate>
                Fertilizer/Pesticides
            </HeaderTemplate>
            <CellTemplate>
                <MudButton Color="Color.Secondary" ButtonType="MudBlazor.ButtonType.Submit" StartIcon="@Icons.Material.Filled.Settings"></MudButton>
            </CellTemplate>
        </TemplateColumn>
        <TemplateColumn>
            <HeaderTemplate>
                Irrigation
            </HeaderTemplate>
            <CellTemplate>
                <MudButton Color="Color.Secondary" ButtonType="MudBlazor.ButtonType.Submit" StartIcon="@Icons.Material.Filled.Settings" Href=""></MudButton>
            </CellTemplate>
        </TemplateColumn>
        <TemplateColumn>
            <HeaderTemplate>
                Edit
            </HeaderTemplate>
            <CellTemplate>
                <MudButton Color="Color.Secondary" ButtonType="MudBlazor.ButtonType.Submit" StartIcon="@Icons.Material.Filled.Edit"></MudButton>
            </CellTemplate>
        </TemplateColumn>
        <TemplateColumn>
            <HeaderTemplate>
                Delete
            </HeaderTemplate>
            <CellTemplate>
                <MudButton Color="Color.Secondary" ButtonType="MudBlazor.ButtonType.Submit" StartIcon="@Icons.Material.Filled.Delete" ></MudButton>
            </CellTemplate>
        </TemplateColumn>
    </Columns>

</MudDataGrid>
<MudButton Variant="MudBlazor.Variant.Filled" Color="Color.Primary" @onclick="AddNewPlant">Add Plant</MudButton>
@code {
    public class PlantModel
    {
        public PlantModel(string name, DateTime datePlanted, string location)
        {
            Name = name;
            DatePlanted = datePlanted;
            Location = location;
        }

        public string Name { get; set; }
        public DateTime DatePlanted { get; set; }
        public string Location { get; set; }
    }

    List<PlantModel> data = new List<PlantModel> {
        new PlantModel("Plant 1", new DateTime(2023, 5, 1), "Location 1"),
        new PlantModel("Plant 2", new DateTime(2023, 5, 5), "Location 2"),
        new PlantModel("Plant 3", new DateTime(2023, 5, 10), "Location 3")
    };

    @*Add new Plant*@
    private void AddNewPlant()
    {
        PlantModel newPlant = new PlantModel("New Plant", DateTime.Now, "New Location");
        data.Add(newPlant);
    }

    @*Delete Plant*@
    private void DeletePlant(PlantModel plant)
    {
        data.Remove(plant);
    }

}